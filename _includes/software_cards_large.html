{% assign items = include.items | default: site.data.software %}

<div class="oss-grid">
  {% for p in items %}

    {%- assign title = p.name | default: p.title | default: p.project | default: "Software" -%}

    {%- assign repo_url = p.repo | default: p.github | default: p.repository | default: p.url -%}
    {%- assign primary_url = p.website | default: p.homepage | default: repo_url -%}

    {%- assign blurb = p.website_blurb | default: p.blurb | default: p.description | default: p.summary -%}

    {%- assign thumb = p.thumb | default: p.image | default: p.thumbnail -%}

    <div class="oss-card">
      <div class="oss-thumb">
        {% if thumb %}
          <a href="{{ primary_url }}"><img src="{{ thumb }}" alt="{{ title }} thumbnail"></a>
        {% endif %}
      </div>

      <div class="oss-body">
        <h3 class="oss-title"><a href="{{ primary_url }}">{{ title }}</a></h3>

        {% if p.role %}
          <div class="oss-role">{{ p.role }}</div>
        {% endif %}

        {% if blurb %}
          <p class="oss-blurb">{{ blurb }}</p>
        {% endif %}

        {% if p.tags %}
          <div class="oss-tags">
            {% for t in p.tags %}
              <span class="oss-tag">{{ t }}</span>
            {% endfor %}
          </div>
        {% endif %}

        <div class="oss-links">
          {% if repo_url %}<a class="oss-link" href="{{ repo_url }}">Repo</a>{% endif %}
          {% if p.docs %}<a class="oss-link" href="{{ p.docs }}">Docs</a>{% endif %}
          {% if p.paper %}<a class="oss-link" href="{{ p.paper }}">Paper</a>{% endif %}
          {% if p.doi %}<a class="oss-link" href="https://doi.org/{{ p.doi }}">DOI</a>{% endif %}
        </div>
      </div>
    </div>

  {% endfor %}
</div>
